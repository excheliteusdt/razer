<!DOCTYPE html>
<html lang="en" id="html-tag">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CardSwift | Elite Exchange</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&family=Noto+Sans+Arabic:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --accent: #3b82f6; --bg: #020617; }
        body { font-family: 'Poppins', 'Noto Sans Arabic', sans-serif; background-color: var(--bg); color: white; margin: 0; overflow-x: hidden; }
        .stars-bg { background: radial-gradient(circle at top, #1e1b4b 0%, #020617 100%); min-height: 100vh; position: relative; }
        .stars-bg::after { content: ""; position: absolute; inset: 0; background-image: url('https://www.transparenttextures.com/patterns/stardust.png'); opacity: 0.3; pointer-events: none; }
        .card-style { background: rgba(30, 41, 59, 0.3); border: 1px solid rgba(255, 255, 255, 0.05); backdrop-filter: blur(15px); border-radius: 2rem; transition: 0.4s; cursor: pointer; }
        .card-style:hover { border-color: var(--accent); transform: translateY(-10px); box-shadow: 0 20px 40px rgba(59, 130, 246, 0.15); }
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); backdrop-filter: blur(12px); z-index: 100; align-items: center; justify-content: center; padding: 20px; }
        .modal-content { background: #0f172a; border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 2.5rem; width: 100%; max-width: 480px; position: relative; padding: 2.5rem; }
        .close-btn { position: absolute; top: 1.5rem; right: 1.5rem; cursor: pointer; color: #64748b; }
        .price-chip { cursor: pointer; border: 1px solid #334155; transition: 0.3s; background: rgba(15, 23, 42, 0.6); border-radius: 1rem; }
        .price-chip.active { background: var(--accent); border-color: #60a5fa; }
        input, select { background: #020617 !important; border: 1px solid #1e293b !important; color: white !important; }
        .glow-button { background: linear-gradient(135deg, #2563eb, #1d4ed8); transition: 0.3s; }
        .hidden-section { display: none; }
        [dir="rtl"] .close-btn { right: auto; left: 1.5rem; }
    </style>
</head>
<body class="stars-bg">

    <nav class="sticky top-0 z-50 bg-[#020617]/80 backdrop-blur-xl border-b border-white/5">
        <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center gap-2 cursor-pointer group" onclick="goHome()">
                <div class="p-2 bg-blue-600 rounded-xl group-hover:scale-110 transition-transform shadow-lg shadow-blue-600/20">
                    <svg width="24" height="24" viewBox="0 0 100 100"><path d="M35 50 L55 20 L55 45 L75 45 L55 80 L55 55 Z" fill="white"/></svg>
                </div>
                <span class="text-2xl font-black tracking-tighter uppercase">Card<span class="text-blue-500">Swift</span></span>
            </div>
            <div class="flex gap-2">
                <button onclick="setLang('en')" class="text-[10px] font-bold border border-slate-700 px-3 py-1 rounded-full hover:bg-white hover:text-black transition">EN</button>
                <button onclick="setLang('ar')" class="text-[10px] font-bold border border-slate-700 px-3 py-1 rounded-full hover:bg-white hover:text-black transition">AR</button>
            </div>
        </div>
    </nav>

    <div id="home-section" class="max-w-7xl mx-auto px-6 pt-16">
        <div class="text-center mb-16">
            <h1 id="txt-hero-title" class="text-5xl md:text-7xl font-black mb-6 bg-gradient-to-b from-white to-slate-500 bg-clip-text text-transparent italic uppercase">Elite Exchange</h1>
            <p id="txt-hero-desc" class="text-slate-400 text-lg max-w-2xl mx-auto leading-relaxed">Secure, Instant, and Global assets swapping.</p>
        </div>
        <div class="grid grid-cols-2 md:grid-cols-3 gap-6 md:gap-10 pb-32">
            <div class="card-style p-8 text-center" onclick="openChoice('Razer Gold', 'https://i.postimg.cc/JzGr8KfP/razer-gold.jpg')"><img src="https://i.postimg.cc/JzGr8KfP/razer-gold.jpg" class="h-28 mx-auto mb-6 object-contain"><h3 class="font-bold">Razer Gold</h3></div>
            <div class="card-style p-8 text-center" onclick="openChoice('PlayStation', 'https://i.postimg.cc/wjTtmhST/download.png')"><img src="https://i.postimg.cc/wjTtmhST/download.png" class="h-28 mx-auto mb-6 object-contain"><h3 class="font-bold">PlayStation</h3></div>
            <div class="card-style p-8 text-center" onclick="openChoice('Steam', 'https://i.postimg.cc/KjGbH57P/steam.jpg')"><img src="https://i.postimg.cc/KjGbH57P/steam.jpg" class="h-28 mx-auto mb-6 object-contain"><h3 class="font-bold">Steam Wallet</h3></div>
        </div>
    </div>

    <div id="regModal" class="modal">
        <div class="modal-content">
            <div class="close-btn" onclick="closeAllModals()"><svg width="28" height="28" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M18 6L6 18M6 6l12 12"/></svg></div>
            <h2 id="txt-reg-title" class="text-3xl font-black text-center mb-6 uppercase">Create Account</h2>
            <div class="space-y-4">
                <input type="text" id="reg-name" placeholder="Full Name" class="w-full p-4 rounded-2xl text-sm">
                <div class="flex gap-2">
                    <select id="country-code" class="p-4 rounded-2xl text-[10px] w-36 border border-slate-800"></select>
                    <input type="number" id="reg-phone" placeholder="Phone" class="flex-1 p-4 rounded-2xl text-sm">
                </div>
                <button onclick="startVerification()" id="txt-reg-btn" class="glow-button w-full py-5 rounded-2xl font-black mt-4 uppercase text-sm tracking-widest">Register & Continue</button>
            </div>
        </div>
    </div>

    <div id="choiceModal" class="modal">
        <div class="modal-content text-center">
            <div class="close-btn" onclick="closeAllModals()"><svg width="28" height="28" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M18 6L6 18M6 6l12 12"/></svg></div>
            <h3 id="choiceTitle" class="text-3xl font-black mb-10 text-blue-400 italic"></h3>
            <div class="grid gap-4">
                <button id="btn-choice-buy" onclick="checkAccess('BUY')" class="bg-emerald-600 py-6 rounded-3xl font-black uppercase tracking-widest">BUY</button>
                <button id="btn-choice-sell" onclick="checkAccess('SELL')" class="bg-blue-600 py-6 rounded-3xl font-black uppercase tracking-widest">SELL</button>
            </div>
        </div>
    </div>

    <div id="action-section" class="hidden-section max-w-2xl mx-auto px-6 py-16">
        <div class="card-style p-10 relative">
            <div class="text-center mb-10">
                <img id="action-img" src="" class="h-28 mx-auto mb-6">
                <h2 id="action-card-name" class="text-3xl font-black italic"></h2>
                <div id="action-type-badge" class="text-xs font-black text-blue-500 uppercase tracking-widest mt-2"></div>
            </div>
            <div class="grid grid-cols-3 md:grid-cols-5 gap-3 mb-10">
                <div class="price-chip p-4 text-center text-xs font-bold" onclick="selectAmount(10)">$10</div>
                <div class="price-chip p-4 text-center text-xs font-bold" onclick="selectAmount(50)">$50</div>
                <div class="price-chip p-4 text-center text-xs font-bold" onclick="selectAmount(100)">$100</div>
                <div class="price-chip p-4 text-center text-xs font-bold" onclick="selectAmount(200)">$200</div>
                <div class="price-chip p-4 text-center text-xs font-bold" onclick="selectAmount(500)">$500</div>
            </div>

            <div id="buy-options" class="hidden-section space-y-4">
                <button onclick="startPayment('STARS')" class="w-full flex items-center justify-between bg-black text-white p-5 rounded-3xl border border-white/10 shadow-xl active:scale-95 transition-all">
                    <div class="flex items-center gap-4">
                        <img src="https://img.icons8.com/ios-filled/50/ffffff/apple-pay.png" class="h-8"/>
                        <img src="https://img.icons8.com/color/48/google-pay.png" class="h-8"/>
                        <div class="text-left border-l border-white/20 pl-4">
                            <p class="font-black text-sm uppercase italic">Apple & Google Pay</p>
                        </div>
                    </div>
                </button>

                <button onclick="startPayment('GLOCAL')" class="w-full flex items-center justify-between bg-slate-100 text-black p-5 rounded-3xl shadow-lg active:scale-95 transition-all">
                    <div class="flex items-center gap-4">
                        <img src="https://img.icons8.com/color/48/visa.png" class="h-6"/>
                        <img src="https://img.icons8.com/color/48/mastercard.png" class="h-6"/>
                        <div class="text-left border-l border-slate-300 pl-4">
                            <p class="font-black text-sm uppercase italic">Credit Card</p>
                        </div>
                    </div>
                </button>

                <p class="text-center text-[10px] text-slate-500 font-bold py-4">â€” OR PAY WITH CRYPTO â€”</p>

                <div class="grid grid-cols-3 gap-3">
                    <button onclick="showAddress('TRC20')" class="bg-slate-800 p-4 rounded-2xl text-xs font-bold border border-white/5 italic">TRC20</button>
                    <button onclick="showAddress('BEP20')" class="bg-slate-800 p-4 rounded-2xl text-xs font-bold border border-white/5 italic">BEP20</button>
                    <button onclick="showAddress('ERC20')" class="bg-slate-800 p-4 rounded-2xl text-xs font-bold border border-white/5 italic">ERC20</button>
                </div>
                <div id="address-box" class="hidden-section bg-slate-950 p-6 rounded-3xl border border-blue-500/20 text-center">
                    <p id="wallet-to-copy" class="text-[11px] font-mono mb-4 text-blue-400"></p>
                    <button onclick="copyWallet()" class="bg-blue-600 px-8 py-2 rounded-full text-[10px] font-black uppercase">Copy</button>
                </div>
                <input type="file" id="buyFile" class="w-full bg-slate-950 p-4 rounded-2xl border border-slate-800 text-xs">
            </div>

            <div id="sell-options" class="hidden-section space-y-8">
                <div class="bg-blue-600/10 p-8 rounded-3xl flex justify-between items-center border border-blue-500/20">
                    <span id="txt-receive" class="text-sm">You Get:</span><span id="receive-amount" class="text-3xl font-black text-green-400">0.00 USDT</span>
                </div>
                <input type="file" id="sellFile" class="w-full bg-slate-950 p-4 rounded-2xl border border-slate-800 text-xs">
                <input type="text" id="sellWallet" placeholder="Your USDT Address" class="w-full p-4 rounded-2xl text-sm">
            </div>

            <button id="submitBtn" onclick="sendToTelegram()" class="glow-button w-full py-6 rounded-3xl font-black mt-12 text-xl shadow-2xl uppercase italic">Confirm Transaction</button>
            <button onclick="goHome()" id="btn-cancel" class="w-full text-slate-500 text-[10px] mt-8 font-black uppercase tracking-widest opacity-50">Cancel</button>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        const TG_TOKEN = "8474410669:AAGijCJUPAKJyBh4L5FyVEas7A-UdpVixWA"; // Ø§Ù„ØªÙˆÙƒÙ† Ø§Ù„Ø¬Ø¯ÙŠØ¯
        const TG_ID = "7865246557";
        const WALLETS = { 'BEP20': '0x97154c5cccaff650cc54fc2b80a2b06884bc8ad0', 'TRC20': 'TVB3yoKYrw81vwKrMgqfvhuMmoQVXozgcf', 'ERC20': '0x97154c5cccaff650cc54fc2b80a2b06884bc8ad0' };

        let userData = {}; let isRegistered = false; let pendingAction = ""; let activeName = ""; let activeImg = ""; let selectedVal = 0;

        // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯ÙˆÙ„
        const countries = [{n:"Iraq", c:"+964", f:"ðŸ‡®ðŸ‡¶"},{n:"Saudi Arabia", c:"+966", f:"ðŸ‡¸ðŸ‡¦"},{n:"Egypt", c:"+20", f:"ðŸ‡ªðŸ‡¬"}];
        const countrySelect = document.getElementById('country-code');
        countries.forEach(ct => { let opt = document.createElement('option'); opt.value = ct.c; opt.innerHTML = `${ct.f} ${ct.c}`; countrySelect.appendChild(opt); });

        function setLang(l) {
            const h = document.getElementById('html-tag');
            h.dir = (l === 'en') ? 'ltr' : 'rtl';
            // ØªØ­Ø¯ÙŠØ« Ù†ØµÙˆØµ Ø§Ù„Ù„ØºØ§Øª Ù‡Ù†Ø§ Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª
        }

        function goHome() {
            document.getElementById('action-section').classList.add('hidden-section');
            document.getElementById('home-section').style.display = 'block';
        }

        function openChoice(n, i) { activeName = n; activeImg = i; document.getElementById('choiceTitle').innerText = n; document.getElementById('choiceModal').style.display = 'flex'; }
        function closeAllModals() { document.querySelectorAll('.modal').forEach(m => m.style.display = 'none'); }
        function checkAccess(a) { pendingAction = a; document.getElementById('choiceModal').style.display = 'none'; if (isRegistered) executeAction(); else document.getElementById('regModal').style.display = 'flex'; }

        async function startVerification() {
            userData = { name: document.getElementById('reg-name').value, phone: document.getElementById('country-code').value + document.getElementById('reg-phone').value };
            if(!userData.name || !userData.phone) return alert("Fill data!");
            isRegistered = true;
            closeAllModals();
            executeAction();
        }

        function executeAction() {
            document.getElementById('home-section').style.display = 'none';
            document.getElementById('action-section').classList.remove('hidden-section');
            document.getElementById('action-card-name').innerText = activeName;
            document.getElementById('action-img').src = activeImg;
            document.getElementById('action-type-badge').innerText = pendingAction;
            if(pendingAction === 'BUY') { document.getElementById('buy-options').classList.remove('hidden-section'); document.getElementById('sell-options').classList.add('hidden-section'); }
            else { document.getElementById('sell-options').classList.remove('hidden-section'); document.getElementById('buy-options').classList.add('hidden-section'); }
        }

        function selectAmount(v) { 
            selectedVal = v; 
            document.querySelectorAll('.price-chip').forEach(c => { c.classList.remove('active'); if(c.innerText === '$'+v) c.classList.add('active'); }); 
            // ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù†Ø³Ø¨Ø© Ù‡Ù†Ø§ Ù„Ù€ 0.95 (Ø®ØµÙ… 5%)
            document.getElementById('receive-amount').innerText = (v * 0.95).toFixed(2) + " USDT"; 
        }

        function showAddress(n) { document.getElementById('address-box').classList.remove('hidden-section'); document.getElementById('wallet-to-copy').innerText = WALLETS[n]; }
        function copyWallet() { navigator.clipboard.writeText(document.getElementById('wallet-to-copy').innerText); alert("Copied!"); }

        function startPayment(m) {
            if(!selectedVal) return alert("Select amount!");
            if(m === 'STARS') tg.showAlert(`Initiating Apple/Google Pay for $${selectedVal}...`);
            else tg.showAlert(`Initiating Credit Card Payment for $${selectedVal}...`);
        }

        async function sendToTelegram() {
            if(!selectedVal) return alert("Select amount!");
            alert("Transaction Submitted!");
            location.reload();
        }

        tg.ready();
    </script>
</body>
</html>
